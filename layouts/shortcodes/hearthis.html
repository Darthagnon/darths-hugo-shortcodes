<!-- HearThis.at shortcode for Hugo

Usage: 

hearthis episode id
hearthis media="set" id="234685-10111066"


Mediatype can be "set" (i.e. album)  (or "episode", "track" or unspecified - singleepisode/track will be assumed)

Get episodeid from HearThis.at >> Set >> Episode >> Social tab >> Short Link (Twitter)
https://hearthis.at/6405929/

For sets (what HearThis calls albums), the id is just the long number from the end of the URL
https://hearthis.at/set/234685-10111066/

If you post a whole album/set but don't want it to scroll (e.g. to avoid double scrollbars), supply height="" (last element) as 42px per episode, +3px

Based on: 
https://gohugo.io/templates/shortcode-templates/ 
https://community.mybb.com/thread-189657.html
and HearThis.at >> Set >> Embed Episode dialog
See also official WordPress plugin (PHP): 
https://wordpress.org/plugins/hearthisat/
-->


{{ if .IsNamedParams }}
	<div class="embed podcast-hearthis">
		<iframe 
		scrolling="no" 
		frameborder="0" 
		allowtransparency
		{{ if .Get "media" | eq "set"}}
			id="hearthis_at_user_{{ .Get "id" }}"
			src="https://hearthis.at/set/{{ .Get "id" }}/embed/?hcolor=&color=&autoplay=0&css="
		{{ else }}
			id="hearthis_at_track_{{ .Get "id" }}" 
			src="https://hearthis.at/embed/{{ .Get "id" }}/transparent_black/?hcolor=&color=&style=2&block_size=2&block_space=2&background=1&waveform=0&cover=0&autoplay=0&css=" 
			height="150"
		{{ end }}
		{{ if .Get "height" }}
			height="{{ .Get "height" }}"
		{{ else }}
			height="350"
		{{ end }}
		width="100%"  
		>
		</iframe>
	</div>
{{ else }}
	<div class="embed podcast-hearthis">
		<iframe 
		scrolling="no" 
		frameborder="0" 
		allowtransparency
		{{ if .Get 0 | eq "set"}}
			id="hearthis_at_user_{{ .Get 1 }}"
			src="https://hearthis.at/set/{{ .Get 1 }}/embed/?hcolor=&color=&autoplay=0&css="
		{{ else }}
			id="hearthis_at_track_{{ .Get 1 }}" 
			src="https://hearthis.at/embed/{{ .Get 1 }}/transparent_black/?hcolor=&color=&style=2&block_size=2&block_space=2&background=1&waveform=0&cover=0&autoplay=0&css=" 
			height="150" 
		{{ end }}
		{{ if .Get 2 }}
			height="{{ .Get 2 }}"
		{{ else }}
			height="350"
		{{ end }}
		width="100%" 
		>
		</iframe>
	</div>
{{ end }}

{{ if .Site.Params.debug }}
	<script>
		console.log("Loaded external content from HearThis.at");
	</script>
{{ end }}
